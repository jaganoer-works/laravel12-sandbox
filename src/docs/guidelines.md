# 開発ガイドライン

## コーディング規約

### PHPコーディング規約

1. **PSR-12**に準拠
   - クラス名: PascalCase
   - メソッド名: camelCase
   - 変数名: camelCase
   - 定数: UPPER_CASE

2. **型宣言**の使用
   ```php
   public function getUserById(int $id): ?User
   {
       return User::find($id);
   }
   ```

3. **DocBlock**の記述
   ```php
   /**
    * ユーザーを検索する
    *
    * @param int $id ユーザーID
    * @return User|null
    */
   ```

### Gitワークフロー

1. **ブランチ命名規則**
   - 機能開発: `feature/機能名`
   - バグ修正: `fix/問題の概要`
   - リファクタリング: `refactor/対象の概要`

2. **コミットメッセージ**
   ```
   feat: 新機能の追加
   fix: バグ修正
   docs: ドキュメントのみの変更
   style: コードスタイルの修正
   refactor: リファクタリング
   test: テストの追加・修正
   chore: ビルドプロセスやツールの変更
   ```

## テストガイドライン

1. **ユニットテスト**
   - 各クラスの基本機能をテスト
   - モックを活用して依存を分離
   - テストメソッド名は目的が明確に

2. **フィーチャーテスト**
   - 主要な機能の統合テスト
   - 実際のデータベースを使用
   - ユーザーストーリーベース

3. **テストカバレッジ**
   - 目標カバレッジ: 80%以上
   - 重要なビジネスロジック: 100%

## セキュリティガイドライン

1. **入力バリデーション**
   - 全てのユーザー入力を検証
   - XSS対策の実施
   - SQLインジェクション対策

2. **認証・認可**
   - 適切なミドルウェアの使用
   - パーミッションの明確な定義
   - セッション管理の適切な実装

3. **データ保護**
   - 機密情報の暗号化
   - 環境変数の適切な管理
   - ログ出力時の機密情報除外

## パフォーマンス最適化

1. **データベース**
   - インデックスの適切な設定
   - N+1問題の回避
   - クエリの最適化

2. **キャッシュ戦略**
   - Redisの効果的な活用
   - キャッシュの適切な無効化
   - キャッシュキーの命名規則

3. **アセット管理**
   - 適切なアセットのバンドル
   - 画像の最適化
   - CDNの活用 